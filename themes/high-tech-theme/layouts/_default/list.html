{{ define "main" }}
  <div class="container section-list">
    <aside class="left-column">
      {{ partial "leftmenus.html" . }}
    </aside>
    <section class="content-column">
      <h1>{{ .Title }}</h1>

      <!-- ✔️ AJOUT : afficher l’image de la section (menus + sous-menus) -->
       <!-- Zone des images de couverture -->
      {{ if .IsSection }}
        {{ $img := .Params.image }}          <!-- image de la section actuelle -->
        {{ if .Parent }}                     <!-- si c'est un sous-menu -->
          {{ $img = .Parent.Params.image }}  <!-- remplacer par l'image du menu parent -->
        {{ end }}

        {{ if $img }}
          <img class="section-cover" src="{{ $img }}" alt="{{ .Title }}">
        {{ end }}
      {{ end }}
      <!--  {{ if .Params.image }}
        <img class="section-cover" src="{{ .Params.image }}" alt="{{ .Title }}">
      {{ end }}   -->

      <div class="submenus">
        <ul>
          {{ range .Sections }}
            <li><a href="{{ .RelPermalink }}">{{ .Title }}</a></li>
          {{ end }}
        </ul>
      </div>

<div class="articles-grid">
  <!-- 1️⃣ Affiche les sous-menus -->
  {{ range .Sections }}
    <article class="card">
      <a href="{{ .RelPermalink }}">
        <h2>{{ .Title }}</h2>
        <p>{{ .Summary }}</p>
        {{ with .Params.menu_image }}
          <img src="{{ . | relURL }}" alt="{{ $.Title }}">
        {{ end }}
      </a>
    </article>
  {{ end }}
  <!-- 2️⃣ Affiche uniquement les articles normaux (pas les _index.md des sous-menus) -->
  {{ range where .Pages "Kind" "in" (slice "page") }}
    <article class="card">
      <a href="{{ .RelPermalink }}">
        <h2>{{ .Title }}</h2>
        <p>{{ .Summary }}</p>
        {{ with .Params.image }}
          <img src="{{ . | relURL }}" alt="{{ $.Title }}">
        {{ end }}
      </a>
    </article>
  {{ end }}
</div>

      {{ if .Paginator }}
        {{ template "_internal/pagination.html" . }}
      {{ end }}
    </section>
  </div>
{{ end }}
