<header class="bg-white shadow relative z-50">
  <div class="container mx-auto px-4 py-4 flex items-center justify-between">
    <!-- Logo + Titre -->
    <a href="/" id="logo-link" class="flex items-center gap-2 min-w-[200px]">
      <img src="{{ .Site.Params.logo | absURL }}" alt="High-Tech" class="w-12 h-12">
      <span class="text-2xl font-bold text-purple-900" style="font-family: 'Orbitron', sans-serif;">High-Tech</span>
    </a>

    <!-- Navigation principale (desktop) -->
    <nav id="main-nav" class="hidden md:block w-full ml-32">
      <ul class="grid grid-cols-6 gap-2 justify-end w-full max-w-6xl mx-auto">
        {{ range first 6 .Site.Menus.main }}
        <li class="group relative">
          <a href="#" data-menu="{{ .Identifier }}" class="menu-item block text-center px-3 py-2 text-[20px] font-semibold text-violet-800 bg-emerald-100 hover:text-emerald-700 hover:bg-violet-100 rounded transition-colors duration-300">
            {{ .Name }}
          </a>
        </li>
        {{ end }}
      </ul>
      <ul class="grid grid-cols-6 gap-2 justify-end w-full max-w-6xl mx-auto mt-2">
        {{ range after 6 .Site.Menus.main }}
        <li class="group relative">
          <a href="#" data-menu="{{ .Identifier }}" class="menu-item block text-center px-3 py-2 text-[20px] font-semibold text-violet-800 bg-emerald-100 hover:text-emerald-700 hover:bg-violet-100 rounded transition-colors duration-300">
            {{ .Name }}
          </a>
        </li>
        {{ end }}
      </ul>
    </nav>

    <!-- Bouton burger / croix (mobile uniquement) -->
    <button id="menu-toggle" class="md:hidden flex flex-col justify-between w-8 h-6 focus:outline-none relative z-50 ml-4">
      <span class="burger-line w-full h-1 bg-violet-800 rounded transition-all duration-300"></span>
      <span class="burger-line w-full h-1 bg-violet-800 rounded transition-all duration-300"></span>
      <span class="burger-line w-full h-1 bg-violet-800 rounded transition-all duration-300"></span>
    </button>
  </div>

  <!-- Section mobile : langue + recherche -->
  <div class="md:hidden flex flex-col items-center gap-2 px-4 py-2 bg-white shadow-sm">
    <!-- Barre de langue (mobile) -->
    <div class="w-full flex justify-end">
      <button id="lang-toggle-mobile" class="flex items-center gap-2 px-3 py-1 bg-white border rounded shadow">
        üåê <span id="current-lang-mobile">FR</span>
      </button>
    </div>

    <!-- Barre de recherche -->
    <form class="w-full flex items-center gap-2" action="{{ "/search/" | relURL }}" method="get">
      <input name="q" type="search" placeholder="Rechercher..."
             class="flex-1 px-3 py-2 border rounded focus:outline-none text-sm" />
      <button type="submit" class="px-3 py-2 rounded border font-semibold bg-emerald-100 hover:bg-violet-400 text-black text-sm">
        Rechercher
      </button>
    </form>
  </div>

</header>

<!-- üîΩ Script pour menu actif + retour page principale -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  const menuItems = document.querySelectorAll('.menu-item');
  const logoLink = document.getElementById('logo-link');

  menuItems.forEach(item => {
    item.addEventListener('click', function(e) {
      e.preventDefault();

      // Supprimer la classe active sur tous les menus
      menuItems.forEach(m => m.classList.remove('active'));
      // Ajouter la classe active sur le menu cliqu√©
      item.classList.add('active');

      // Stocker le menu actif dans une variable globale pour cover.html
      window.activeMenu = item.getAttribute('data-menu');

      // D√©clencher un √©v√©nement custom pour cover.html et main.js
      const event = new CustomEvent('menuChanged', { detail: { menuId: window.activeMenu } });
      document.dispatchEvent(event);
    });
  });

  // Retour page principale si clic sur logo
  if (logoLink) {
    logoLink.addEventListener('click', function(e) {
      e.preventDefault();

      // Retirer menu actif
      menuItems.forEach(m => m.classList.remove('active'));
      window.activeMenu = null;

      // √âv√©nement pour cover.html / main.js pour r√©afficher slider + articles
      const event = new CustomEvent('menuChanged', { detail: { menuId: null } });
      document.dispatchEvent(event);

      // Redirection vers la page d'accueil
      window.location.href = '/';
    });
  }
});
</script>
