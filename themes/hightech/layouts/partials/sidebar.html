<!-- Sidebar — visible seulement sur desktop -->
<aside class="w-128 hidden lg:block">
  <div class="bg-white border rounded p-4 sticky top-6">
    <ul class="space-y-2">
      <li>
        <a href="/actualites-nouveautes/"
           class="icon-link block text-center px-3 py-2 text-[20px] font-semibold text-emerald-700 bg-violet-100 rounded transition-colors duration-300 hover:text-violet-800 hover:bg-emerald-100">
          Actualités & Nouveautés
        </a>
      </li>
      <li>
        <a href="/tests-comparatifs/"
           class="icon-link block text-center px-3 py-2 text-[20px] font-semibold text-emerald-700 bg-violet-100 rounded transition-colors duration-300 hover:text-violet-800 hover:bg-emerald-100">
          Filtrer par :
        </a>
      </li>
      <li>
        <a href="https://www.facebook.com/tonpage" target="_blank"
           class="icon-link flex items-center justify-center gap-2 px-3 py-2 text-[20px] font-semibold text-emerald-700 bg-violet-100 rounded transition-colors duration-300 hover:text-violet-800 hover:bg-emerald-100">
          <img src="{{ "images/facebook.svg" | relURL }}" alt="Facebook" class="w-5 h-5">
          Facebook
        </a>
      </li>
    </ul>
  </div>
</aside>

<!-- Mobile nav — menu scrollable et liens injectés -->
<nav id="mobile-nav" class="fixed top-0 left-0 w-full h-full bg-white z-50 transform -translate-y-full opacity-0 pointer-events-none md:hidden">
  <!-- Bouton fermer -->
  <button id="mobile-nav-close" class="absolute top-4 right-4 w-8 h-8 flex flex-col justify-center items-center z-50">
    <span class="burger-line w-full h-1 bg-violet-800 rounded transition-all duration-300 rotate-45 translate-y-1"></span>
    <span class="burger-line w-full h-1 bg-violet-800 rounded opacity-0"></span>
    <span class="burger-line w-full h-1 bg-violet-800 rounded transition-all duration-300 -rotate-45 -translate-y-1"></span>
  </button>

  <!-- Conteneur scrollable -->
  <div class="mt-20 h-full overflow-y-auto" style="-webkit-overflow-scrolling: touch; padding: 0 1rem;">
    <ul id="mobile-menu-list" class="flex flex-col space-y-2">
      <!-- 1️⃣ Liens avant les menus principaux injectés par JS -->
      <!-- 2️⃣ Menus principaux générés par Hugo -->
      {{ range .Site.Menus.main }}
      <li>
        <a href="{{ .URL }}" data-id="{{ .Identifier }}" class="menu-item block text-center px-3 py-2 text-[20px] font-semibold text-violet-800 bg-emerald-100 hover:text-emerald-700 hover:bg-violet-100 rounded transition-colors duration-300">
          {{ .Name }}
        </a>
      </li>
      {{ end }}
      <!-- 3️⃣ Lien Facebook à la fin injecté par JS -->
    </ul>
  </div>
</nav>

<!-- JS pour injecter les trois liens fixes -->
<script>
document.addEventListener('DOMContentLoaded', () => {
  const menu = document.getElementById('mobile-menu-list');
  if (!menu) return;

  // Liens à mettre avant les menus principaux
  const beforeLinks = `
    <li>
      <a href="/actualites-nouveautes/" class="icon-link block text-center px-3 py-2 text-[18px] font-semibold text-emerald-700 bg-violet-100 rounded transition duration-300 hover:text-violet-800 hover:bg-emerald-100">
        Actualités & Nouveautés
      </a>
    </li>
    <li>
      <a href="/tests-comparatifs/" class="icon-link block text-center px-3 py-2 text-[18px] font-semibold text-emerald-700 bg-violet-100 rounded transition duration-300 hover:text-violet-800 hover:bg-emerald-100">
        Filtrer par :
      </a>
    </li>
    <hr class="my-2 border-emerald-200">
  `;
  menu.insertAdjacentHTML('afterbegin', beforeLinks);

  // Lien Facebook à la fin
  const afterLinks = `
    <hr class="my-2 border-emerald-200">
    <li>
      <a href="https://www.facebook.com/tonpage" target="_blank"
         class="icon-link flex items-center justify-center gap-2 px-3 py-2 text-[18px] font-semibold text-emerald-700 bg-violet-100 rounded transition duration-300 hover:text-violet-800 hover:bg-emerald-100">
        <img src="{{ "images/facebook.svg" | relURL }}" alt="Facebook" class="w-5 h-5">
        Facebook
      </a>
    </li>
  `;
  menu.insertAdjacentHTML('beforeend', afterLinks);
});
</script>

<!-- Styles pour brillance -->
<style>
.icon-link {
  position: relative;
  overflow: hidden;
}
.icon-link::before {
  content: "";
  position: absolute;
  top: 0;
  left: -75%;
  width: 50%;
  height: 100%;
  background: linear-gradient(120deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.5) 50%, rgba(255,255,255,0) 100%);
  transform: skewX(-20deg);
}
.icon-link:hover::before,
.icon-link:active::before {
  animation: shine-aside 0.7s forwards;
}
@keyframes shine-aside {
  0% { left: -75%; }
  100% { left: 125%; }
}
</style>
