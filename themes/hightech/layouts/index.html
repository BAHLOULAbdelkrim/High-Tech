{{ define "main" }}
  <!-- Slider -->
  <div class="mb-6">
    <div id="slider" class="relative overflow-hidden rounded-lg shadow">
      {{ $slides := .Site.Params.slider }}
      {{ if not $slides }}
        <!-- fallback slides -->
        <div class="slide"><img src="/images/slide_a.jpg" alt="slide1" class="w-full h-64 object-cover"></div>
        <div class="slide hidden"><img src="/images/slide2.jpg" alt="slide2" class="w-full h-64 object-cover"></div>
        <div class="slide hidden"><img src="/images/slide3.jpg" alt="slide3" class="w-full h-64 object-cover"></div>
        <div class="slide hidden"><img src="/images/slide4.jpg" alt="slide3" class="w-full h-64 object-cover"></div>
      {{ else }}
        {{ range $i, $s := $slides }}
          <div class="slide {{ if ne $i 0 }}hidden{{ end }}"><img src="{{ $s }}" alt="slide{{ $i }}" class="w-full h-64 object-cover"></div>
        {{ end }}
      {{ end }}
    </div>
  </div>

  <!-- Zone centrale pour derniers articles / sous-menus -->
  <section id="main-content">
    <h2 class="text-xl font-bold mb-4">Derniers articles</h2>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
      {{ range first 9 (where .Site.RegularPages "Type" "in" (slice "smartphones" "tablettes" "ordinateurs" "photos-videos" "wearables" "televisions" "gaming" "domotique" "audio" "objets-connectes" "impression" "peripheriques" )) }}
        <article class="bg-white rounded shadow overflow-hidden">
          {{ with .Params.thumbnail }}
            <img src="{{ . }}" alt="{{ $.Title }}" class="w-full h-40 object-cover">
          {{ else }}
            <img src="/images/placeholder.jpg" alt="thumb" class="w-full h-40 object-cover">
          {{ end }}
          <div class="p-4">
            <h3 class="font-semibold text-lg"><a href="{{ .RelPermalink }}">{{ .Title }}</a></h3>
            <p class="text-sm text-gray-600 mt-2">{{ .Summary }}</p>
          </div>
        </article>
      {{ end }}
    </div>
  </section>

  <!-- Slider JS -->
  <script>
    (function(){
      const interval = {{ default 5000 .Site.Params.sliderInterval }};
      let i = 0;
      const slides = Array.from(document.querySelectorAll('#slider .slide'));
      if (slides.length === 0) return;
      setInterval(() => {
        slides[i].classList.add('hidden');
        i = (i + 1) % slides.length;
        slides[i].classList.remove('hidden');
      }, interval);
    })();
  </script>
{{ end }}
