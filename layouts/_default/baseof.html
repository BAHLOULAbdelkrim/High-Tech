
<!doctype html>
<html lang="{{ .Lang }}">
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <title>{{ if .IsHome }}{{ .Site.Title }}{{ else }}{{ .Title }} ‚Äî {{ .Site.Title }}{{ end }}</title>
    <meta name="description" content="{{ .Site.Params.description }}"/>
    <link rel="icon" href="{{ "favicon.png" | relURL }}">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
      :root{
        --max-width:1100px;
        --menu-bg:#dff6ef; /* emerald-100 approx */
        --menu-text:#5b21b6; /* violet-800 */
        --menu-hover-bg:#5b21b6; --menu-hover-text:#dff6ef;
        --submenu-bg:#f7afaf; --submenu-text:#1e3a8a;
        --submenu-hover-bg:#84a4fc; --submenu-hover-text:#ff0000;
        --leftcol-width:220px;
      }
      html,body{font-family: 'Inter', sans-serif; margin:0; padding:0; background:#fff;}
      .container{max-width:var(--max-width); margin:20px auto; padding:0 16px; position:relative;}
      header{display:flex; align-items:center; justify-content:space-between; gap:12px;}
      .brand{display:flex; align-items:center; gap:10px; font-family:'Orbitron', sans-serif; color:#4c1d95; font-size:22px;}
      .brand img{height:48px;}
      /* two-row menu bar */
      .menus{display:flex; flex-direction:column; gap:6px; margin-top:8px;}
      .menu-row{display:flex; gap:6px; flex-wrap:nowrap; justify-content:space-between;}
      .menu-item{flex:1; background:var(--menu-bg); padding:10px; text-align:center; color:var(--menu-text); border-radius:6px; cursor:pointer; position:relative; transition:all .25s ease;}
      .menu-item:hover{background:var(--menu-hover-bg); color:var(--menu-hover-text); box-shadow:0 6px 18px rgba(0,0,0,.12); transform:translateY(-2px); filter:brightness(1.06);}
      /* shine effect */
      .menu-item::after{content:''; position:absolute; left:-60%; top:0; width:40%; height:100%; background:linear-gradient(120deg, rgba(255,255,255,0.15), rgba(255,255,255,0.05)); transform:skewX(-20deg); transition:all .6s ease;}
      .menu-item:hover::after{left:120%;}
      /* search + lang row */
      .control-row{display:flex; align-items:center; justify-content:space-between; margin-top:10px;}
      .controls-left{display:flex; align-items:center; gap:8px;}
      .search-box{display:flex; align-items:center; gap:8px; max-width:calc(var(--max-width) - 40px);}
      .search-input{padding:8px 10px; border:1px solid #ddd; border-radius:6px; width:280px;}
      .search-btn{padding:8px; border-radius:6px; cursor:pointer; border:none; background:transparent;}
      .search-btn:hover{filter:brightness(1.2);}
      .lang-box{display:flex; gap:8px; align-items:center;}
      .lang-item{padding:6px 8px; border-radius:6px; cursor:pointer; display:flex; align-items:center; gap:6px;}
      /* main area */
      main{display:flex; gap:12px; margin-top:14px;}
      .content{flex:1;}
      .left-sidebar{width:var(--leftcol-width); color:#fff;}
      .left-item{background:#7c3aed; color:#10b981; padding:10px; margin-bottom:8px; border-radius:6px; cursor:pointer;}
      .left-item:hover{background:#4c1d95; color:#a7f3d0; filter:brightness(1.05);}
      /* carousel */
      .hero{height:420px; border-radius:8px; overflow:hidden; position:relative; background:#eee;}
      .hero img{width:100%; height:100%; object-fit:cover; display:block;}
      .slides{position:relative; height:100%;}
      .slide{position:absolute; inset:0; opacity:0; transition:opacity .6s ease;}
      .slide.active{opacity:1; z-index:2;}
      .submenus{display:grid; grid-template-columns:repeat(3,1fr); gap:10px; margin-top:12px;}
      .submenu{background:var(--submenu-bg); color:var(--submenu-text); padding:10px; border-radius:6px; cursor:pointer; transition:all .2s ease; text-align:center;}
      .submenu:hover{background:var(--submenu-hover-bg); color:var(--submenu-hover-text); box-shadow:0 8px 20px rgba(0,0,0,.12); transform:translateY(-3px); filter:brightness(1.03);}
      /* posts grid */
      .posts-grid{display:grid; grid-template-columns:repeat(3,1fr); gap:12px; margin-top:12px;}
      .post{border-radius:8px; overflow:hidden; border:1px solid #eee; background:#fff;}
      .post img{width:100%; height:160px; object-fit:cover; display:block;}
      .post .meta{padding:8px;}
      /* article tabs */
      .tabs{display:flex; gap:8px; margin-top:12px;}
      .tab{padding:8px 12px; border-radius:8px; background:#f3f4f6; cursor:pointer; font-weight:600;}
      .tab.active{background:#eef2ff; box-shadow:0 6px 18px rgba(0,0,0,.06);}
      /* responsive */
      @media (max-width:900px){
        :root{--max-width:94%;}
        .menu-row{flex-wrap:wrap;}
        .menu-item{flex:0 0 48%;}
        .submenus{grid-template-columns:repeat(2,1fr);}
        .posts-grid{grid-template-columns:repeat(2,1fr);}
      }
      @media (max-width:600px){
        .menus{display:none;} /* hide desktop menus on mobile; use burger */
        .mobile-burger{display:flex;}
        .posts-grid{grid-template-columns:1fr;}
        .left-sidebar{display:none;}
      }
      .mobile-burger{display:none; align-items:center; gap:8px; cursor:pointer;}
      .mobile-menu{position:fixed; inset:0; background:rgba(0,0,0,.6); display:none; z-index:80; align-items:flex-start; padding-top:60px;}
      .mobile-menu .panel{background:#fff; width:300px; padding:16px; margin-left:10px; height:100vh; overflow:auto;}
    </style>
  </head>
  <body>
    <div class="container">
      <header>
        <div style="display:flex; align-items:center; gap:12px;">
          <img src="{{ "images/Logo_2.png" | relURL }}" alt="logo" style="height:48px;">
          <div class="brand">High-Tech</div>
        </div>
        <div style="display:flex; align-items:center; gap:12px;">
          <div class="mobile-burger" id="burger">
            <div style="width:24px; height:2px; background:#333;"></div>
            <div style="width:24px; height:2px; background:#333;"></div>
            <div style="width:24px; height:2px; background:#333;"></div>
          </div>
          <div style="text-align:right; color:#333;">High-Tech</div>
        </div>
      </header>

      <!-- Menus: two rows of 6 items each -->
      <nav class="menus" id="menus">
        <div class="menu-row" id="row1">
          {{ range $i, $m := slice "Smartphones" "Tablettes" "Ordinateurs" "Photos & Vid√©os" "Wearables" "Home Cinema" }}
            <div class="menu-item" data-menu="{{ $m | urlize }}">{{ $m }}</div>
          {{ end }}
        </div>
        <div class="menu-row" id="row2">
          {{ range $i, $m := slice "Gaming" "Domotique" "Audio" "Obj. connect√©s" "Impression" "P√©riph√©riques" }}
            <div class="menu-item" data-menu="{{ $m | urlize }}">{{ $m }}</div>
          {{ end }}
        </div>

        <div class="control-row">
          <div class="controls-left">
            <div class="search-box" id="search-box">
              <input class="search-input" id="search-input" placeholder="Rechercher...">
              <button class="search-btn" id="search-btn" title="Rechercher">üîç</button>
            </div>
          </div>
          <div class="lang-box" id="lang-box">
            <span>Rechercher</span>
            <div style="width:12px;"></div>
            <div class="lang-item" data-lang="fr">üåê FR</div>
            <div class="lang-item" data-lang="en">üåê EN</div>
            <div class="lang-item" data-lang="ar">üåê AR</div>
          </div>
        </div>
      </nav>

      <main>
        <aside class="left-sidebar">
          <div class="left-item">Actualit√©s</div>
          <div class="left-item">Filtrer par</div>
          <div class="left-item">Facebook</div>
        </aside>
        <section class="content">
          <div class="hero" id="hero">
            <div class="slides" id="slides">
              {{ range $i := seq 1 4 }}
                <div class="slide{{ if eq $i 1 }} active{{ end }}" data-slide="{{ $i }}"><img src="{{ printf "images/slide%d.jpg" $i | relURL }}" alt="slide{{$i}}"></div>
              {{ end }}
            </div>
          </div>

          <div id="submenus-area" class="submenus" style="display:none;"></div>
          <div id="posts-area" class="posts-grid">
            <!-- posts will be rendered here by Hugo or by default list -->
            {{ range first 9 (where .Site.RegularPages "Type" "post") }}
            <article class="post">
              <img src="{{ .Params.image | default "images/image_art.jpg" | relURL }}" alt="{{ .Title }}">
              <div class="meta"><h3><a href="{{ .RelPermalink }}">{{ .Title }}</a></h3><p>{{ .Summary }}</p></div>
            </article>
            {{ end }}
          </div>
        </section>
      </main>

      <footer style="margin-top:24px; color:#666; text-align:center;">High-Tech ‚Äî ¬© {{ now.Format "2006" }}</footer>
    </div>

    <!-- Mobile menu panel -->
    <div class="mobile-menu" id="mobileMenu">
      <div class="panel" id="mobilePanel"></div>
    </div>

    <script>
      // Carousel logic: autoplay every 3s
      let current = 0;
      const slides = document.querySelectorAll('.slide');
      function showSlide(i){
        slides.forEach((s, idx)=> s.classList.toggle('active', idx===i));
      }
      let autoplay = setInterval(()=>{ current = (current+1)%slides.length; showSlide(current); }, 3000);

      // Menu click logic: replace hero images with menu-specific image and show submenus
      const menuData = {
        "smartphones": { image: "/images/smartphones.png", subs: ["Android","iPhone","pliables"] },
        "tablettes": { image: "/images/tablettes.png", subs: ["Android","iPad","Windows"] },
        "ordinateurs": { image: "/images/ordinateurs.png", subs: ["Portables","PC de bureau","Min PC","ultrabooks","gaming"] },
        "photos-videos": { image: "/images/photos-videos.png", subs: ["Reflex","mirrorless","action cam","objectifs","cam√©ras de surveillance","projecteurs","WebCam"] },
        "wearables": { image: "/images/wearables.png", subs: ["Smartwatches","bracelets fitness","lunettes connect√©es","lunettes r√©alit√© virtuelle"] },
        "televisions": { image: "/images/televisions.png", subs: ["Smart TV","OLED","QLED","projecteurs"] },
        "gaming": { image: "/images/gaming.png", subs: ["Consoles","accessoires","jeux vid√©o"] },
        "domotique": { image: "/images/domotique.png", subs: ["Assistants vocaux","lampes","thermostats","mesure battement cardiaque","mesure temp√©rature","mesure hypertension","mesure glyc√©mie"] },
        "audio": { image: "/images/audio.png", subs: ["Filaires","sans fil","true wireless","haut-parleurs","microphones","amplis"] },
        "obj.-connect√©s": { image: "/images/objets-connectes.png", subs: ["Drones","cam√©ras sportives","gadgets"] },
        "impression": { image: "/images/impression.png", subs: ["Imprimantes","Imprimantes 3D","photocopieuses","scanners","consommables"] },
        "p√©riph√©riques": { image: "/images/peripheriques.png", subs: ["√âcrans","souris","claviers","Stockage","√ânergie & Charge","Protections"] }
      };

      document.querySelectorAll('.menu-item').forEach(el=>{
        el.addEventListener('click', ()=>{
          const key = el.dataset.menu.toLowerCase();
          // normalize key (urlize)
          const norm = key.replace(/ /g,'-').replace(/&/g,'').replace(/\./g,'').toLowerCase();
          const data = menuData[norm] || menuData[key] || null;
          if(data){
            // stop autoplay and show menu image
            clearInterval(autoplay);
            document.getElementById('slides').innerHTML = '<div class="slide active"><img src="'+data.image+'"></div>';
            // show submenus in the submenus-area
            const subArea = document.getElementById('submenus-area');
            subArea.innerHTML = '';
            data.subs.forEach(s=>{
              const d = document.createElement('div');
              d.className='submenu';
              d.innerText = s;
              d.addEventListener('click', ()=>{ location.href = '/'+norm+'/'+s.toLowerCase().replace(/ /g,'-')+'/'+''; });
              subArea.appendChild(d);
            });
            subArea.style.display='grid';
            // hide posts area
            document.getElementById('posts-area').style.display='none';
          } else {
            // fallback: show default slides
            location.href = '/';
          }
        });
      });

      // Burger mobile menu
      const burger = document.getElementById('burger');
      const mobileMenu = document.getElementById('mobileMenu');
      const mobilePanel = document.getElementById('mobilePanel');
      burger.addEventListener('click', ()=>{
        if(mobileMenu.style.display==='flex'){ mobileMenu.style.display='none'; burger.innerHTML = '<div style=\"width:24px;height:2px;background:#333\"></div><div style=\"width:24px;height:2px;background:#333\"></div><div style=\"width:24px;height:2px;background:#333\"></div>'; }
        else {
          mobileMenu.style.display='flex';
          // build menu list
          mobilePanel.innerHTML='';
          const all = document.querySelectorAll('.menu-item');
          all.forEach(m=>{
            const btn = document.createElement('div');
            btn.style.padding='8px'; btn.style.borderBottom='1px solid #eee'; btn.style.cursor='pointer';
            btn.innerText = m.innerText;
            btn.addEventListener('click', ()=> m.click());
            mobilePanel.appendChild(btn);
          });
        }
      });

      // Search button hover stronger color effect
      document.getElementById('search-btn').addEventListener('mouseenter', ()=>{ document.getElementById('search-btn').style.filter='brightness(1.3)'; });
      document.getElementById('search-btn').addEventListener('mouseleave', ()=>{ document.getElementById('search-btn').style.filter=''; });

      // Language switching (very simple client-side switch, Hugo will handle actual localized pages when built)
      document.querySelectorAll('.lang-item').forEach(li=> li.addEventListener('click', ()=>{
        const lang = li.dataset.lang;
        // basic behavior: append lang prefix (this requires Hugo multilingual build to provide content under /fr/ /en/ /ar/ )
        if(location.pathname.startsWith('/'+lang+'/')) return;
        location.href = '/'+lang+location.pathname;
      }));

      // Basic geo detection (optional): tries to detect user's browser language and redirect to matching lang on first visit
      (function(){
        if(sessionStorage.getItem('lang-orient')) return;
        const userLang = (navigator.language || navigator.userLanguage || 'fr').slice(0,2);
        if(['fr','en','ar'].includes(userLang)){
          // redirect to that language home (only if currently at root)
          if(location.pathname==='/' || location.pathname===''){
            sessionStorage.setItem('lang-orient','1');
            location.href = '/'+userLang+'/';
          }
        }
      })();
    </script>
  </body>
</html>
