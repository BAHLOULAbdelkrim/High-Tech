{{ define "main" }}
<script>
  (function() {
    // Si l'utilisateur est déjà dans /fr/, /en/ ou /ar/, ne rien faire
    const path = window.location.pathname;
    if (/^\/(fr|en|ar)\/?/.test(path)) return;

    // Détection de la langue du navigateur
    const lang = (navigator.language || navigator.userLanguage || "en").substring(0,2);

    let target = "/en/"; // langue par défaut

    if (lang === "fr") target = "/fr/";
    if (lang === "ar") target = "/ar/";

    window.location.replace(target);
  })();
</script>

<noscript>
  <!-- Si JS désactivé, affiche simplement un lien vers les langues -->
  <p>Please choose your language:</p>
  <ul>
    <li><a href="/fr/">Français</a></li>
    <li><a href="/en/">English</a></li>
    <li><a href="/ar/">العربية</a></li>
  </ul>
</noscript>
{{ end }}
